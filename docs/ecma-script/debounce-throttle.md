---
title: Debounce Throttle
layout: "doc"
createTime: "2023-05-10"
---

# Debounce

::: info ðŸ’¡
Debounceï¼Œé˜²æŠ–å‡½æ•°æ˜¯ä¸€ç§ä¼˜åŒ–å‡½æ•°è°ƒç”¨é¢‘çŽ‡çš„æ‰‹æ®µï¼Œå®ƒèƒ½åœ¨è§„å®šçš„æ—¶é—´å†…åªè®©å‡½æ•°æ‰§è¡Œä¸€æ¬¡ã€‚è¿™å¯¹äºŽä¸€äº›éœ€è¦é¢‘ç¹è§¦å‘ä½†åˆä¸å¸Œæœ›é¢‘ç¹æ‰§è¡Œçš„åœºæ™¯éžå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚è¾“å…¥æ¡†çš„è¾“å…¥ç›‘å¬ã€çª—å£å¤§å°çš„å˜åŒ–ç›‘å¬ç­‰ã€‚
:::

## ç¤ºä¾‹ä»£ç 

```JavaScript
function debounce(fn, delay) {
  let timer = null;

  return function() {
    const context = this;
    const args = arguments;

    if (timer) {
      clearTimeout(timer);
    }

    timer = setTimeout(function() {
      fn.apply(context, args);
    }, delay);
  };
}
```

## å‚æ•°ä¸Žå˜é‡

- `fn`: è¿™æ˜¯ä½ å¸Œæœ›è¢«é˜²æŠ–çš„å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ä½ å¸Œæœ›åœ¨ä¸€æ®µæ—¶é—´å†…åªæ‰§è¡Œä¸€æ¬¡çš„å‡½æ•°ã€‚
- `delay`: è¿™æ˜¯ä¸€ä¸ªæ—¶é—´é—´éš”ï¼Œå•ä½æ˜¯æ¯«ç§’ã€‚å³ä½ å¸Œæœ›åœ¨è§¦å‘è¡Œä¸ºåœæ­¢åŽå¤šä¹…ï¼Œ`fn` å‡½æ•°æ‰è¢«çœŸæ­£æ‰§è¡Œã€‚æ¯”å¦‚ï¼Œå¦‚æžœ `delay` æ˜¯ 1000ï¼Œé‚£ä¹ˆåªæœ‰åœ¨æœ€åŽä¸€æ¬¡è§¦å‘ `fn` åŽçš„ 1 ç§’é’Ÿå†…æ²¡æœ‰å†æ¬¡è§¦å‘ï¼Œ`fn` å‡½æ•°æ‰ä¼šè¢«æ‰§è¡Œã€‚
- `timer`: è¿™æ˜¯ä¸€ä¸ªç”¨äºŽå­˜å‚¨å®šæ—¶å™¨çš„å˜é‡ã€‚æ¯æ¬¡è§¦å‘é˜²æŠ–å‡½æ•°ï¼Œéƒ½ä¼šæ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨ï¼Œå¹¶é‡æ–°è®¾ç½®ä¸€ä¸ªæ–°çš„å®šæ—¶å™¨ã€‚
- `context` å’Œ `args`: è¿™ä¸¤ä¸ªå˜é‡ç”¨äºŽåœ¨ `setTimeout` çš„å›žè°ƒå‡½æ•°ä¸­ï¼Œä¿æŒ `fn` å‡½æ•°çš„è°ƒç”¨ä¸Šä¸‹æ–‡å’Œå‚æ•°ã€‚`context` ä¿å­˜äº† `fn` å‡½æ•°çš„ `this` å€¼ï¼Œ`args` ä¿å­˜äº†ä¼ ç»™ `fn` å‡½æ•°çš„å‚æ•°ã€‚

## å·¥ä½œåŽŸç†

1. å½“é˜²æŠ–å‡½æ•°è¢«è§¦å‘æ—¶ï¼Œå…ˆæ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨ï¼ˆå¦‚æžœå­˜åœ¨çš„è¯ï¼‰ï¼Œç„¶åŽè®¾ç½®ä¸€ä¸ªæ–°çš„å®šæ—¶å™¨ã€‚æ–°çš„å®šæ—¶å™¨ä¼šåœ¨ `delay` æ¯«ç§’åŽæ‰§è¡Œã€‚
2. å¦‚æžœåœ¨ `delay` æ¯«ç§’å†…ï¼Œé˜²æŠ–å‡½æ•°å†æ¬¡è¢«è§¦å‘ï¼Œé‚£ä¹ˆå°±ä¼šæ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨ï¼Œå†è®¾ç½®ä¸€ä¸ªæ–°çš„å®šæ—¶å™¨ã€‚è¿™æ ·ä¸€æ¥ï¼Œåªè¦é˜²æŠ–å‡½æ•°åœ¨ `delay` æ¯«ç§’å†…è¢«è¿žç»­è§¦å‘ï¼Œ`fn` å‡½æ•°å°±ä¸ä¼šè¢«æ‰§è¡Œã€‚
3. åªæœ‰åœ¨æœ€åŽä¸€æ¬¡è§¦å‘é˜²æŠ–å‡½æ•°åŽçš„ `delay` æ¯«ç§’å†…æ²¡æœ‰å†æ¬¡è§¦å‘ï¼Œå®šæ—¶å™¨æ‰ä¼šåˆ°æ—¶é—´ï¼Œä»Žè€Œæ‰§è¡Œ `fn` å‡½æ•°ã€‚

è¿™ä¸ªé˜²æŠ–å‡½æ•°çš„å®žçŽ°ä½¿ç”¨äº† JavaScript çš„é—­åŒ…å’Œå®šæ—¶å™¨åŠŸèƒ½ã€‚é—­åŒ…æ˜¯æŒ‡å‡½æ•°æœ‰è®¿é—®åˆ°å®ƒè‡ªå·±è¢«å®šä¹‰æ—¶çš„è¯æ³•ä½œç”¨åŸŸï¼Œå³ä½¿åœ¨å®ƒè¢«è°ƒç”¨æ—¶å·²ç»åœ¨ä¸åŒçš„ä½œç”¨åŸŸäº†ã€‚åœ¨è¿™ä¸ªé˜²æŠ–å‡½æ•°ä¸­ï¼Œè¿”å›žçš„åŒ¿åå‡½æ•°å°±å½¢æˆäº†ä¸€ä¸ªé—­åŒ…ï¼Œå®ƒå¯ä»¥è®¿é—®å¹¶ä¿®æ”¹å®ƒè¢«å®šä¹‰æ—¶çš„ä½œç”¨åŸŸä¸­çš„ `timer` å˜é‡ã€‚æ¯æ¬¡è°ƒç”¨ `debounce` å‡½æ•°ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸï¼Œä»¥åŠä¸€ä¸ªæ–°çš„ `timer` å˜é‡ã€‚ç„¶åŽï¼Œè¿”å›žçš„å‡½æ•°é€šè¿‡é—­åŒ…ï¼Œå¯ä»¥è®¿é—®å¹¶ä¿®æ”¹è¿™ä¸ª `timer` å˜é‡ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ¯ä¸ªé€šè¿‡ `debounce` å‡½æ•°ç”Ÿæˆçš„å‡½æ•°ï¼ˆæ¯”å¦‚ä¸‹é¢ `ä¾‹å­ 1`ä¸­çš„ `onChange1`ã€`onChange2` å’Œ `onChange3`ï¼‰éƒ½æœ‰å„è‡ªçš„å®šæ—¶å™¨ï¼Œå®ƒä»¬ä¹‹é—´æ˜¯äº’ä¸å½±å“çš„ã€‚

::: details ä¾‹å­ 1

```JavaScript
function debounce(func, delay) {
  let timer;
  return function() {
    const context = this;
    const args = arguments;
    clearTimeout(timer);
    timer = setTimeout(() => {
      func.apply(context, args);
    }, delay);
  };
}

onChange1 = debounce(() => {
  console.log('debounce1');
}
, 1000);
onChange2 = debounce(() => {
  console.log('debounce2');
}
, 2000);

onChange3 = debounce(() => {
  console.log('debounce3');
}
, 3000);

onChange1();
onChange2();
onChange3();
onChange1();
onChange2();
onChange3();
onChange1();
onChange2();
onChange3();
onChange1();
onChange2();
onChange3();
```

:::
