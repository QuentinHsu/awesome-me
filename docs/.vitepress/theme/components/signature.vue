<script setup lang="ts">
import { computed, onBeforeUnmount, onMounted, ref } from 'vue'

const isDark = ref(false)
let observer = new MutationObserver(() => {})

function setDark() {
  isDark.value = document.documentElement.classList.contains('dark')
}

onMounted(() => {
  setDark()
  observer = new MutationObserver(setDark)
  observer.observe(document.documentElement, {
    attributes: true,
    attributeFilter: ['class'],
  })
})

onBeforeUnmount(() => {
  observer.disconnect()
})
const logoColor = computed(() => (isDark.value ? '#fdfdfd' : '#303030'))
</script>

<template>
  <svg
    :key="isDark.value" style="transform: translate3d(0, 0, 0);" width="270" height="50" viewBox="0 0 540  100"
    preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg"
  >
    <path
      id="signaturePath"
      d="m 10,80 1,-1 C 6.1097355,58.459507 14.852635,31.687416 28.300154,16 35.724377,7.3391571 51.171703,-2.6430206 60.146606,10.043213 70.613678,24.838661 61.182255,52.508507 54.216049,67 51.843052,71.93644 48.192413,79.698486 42.98534,82.172066 37.775265,84.647079 15.066394,68.50621 14.673611,84.015434 14.31249,98.274452 31.571119,91.845825 39,92.837967 50.59166,94.386055 64.038239,110.86493 71,91 L 47,88 C 54.494373,78.083961 62.533569,69.906235 67.188271,58 70.289124,50.068344 72.894142,41.573914 72.99614,33 73.278671,9.2501144 55.924137,-8.9436646 32,4.4398193 16.308624,13.217781 5.9434695,30.636452 2.6118827,48 0.61001205,58.433342 -2.1760674,75.168442 10,80 M 394,30 C 392.92328,19.849213 398.26144,6.5601501 409,4 408.54199,14.022934 403.57794,31.484482 397.91434,39.855709 394.86615,44.361164 389.67535,44.175461 388,50 l 7,-1 -13,48 C 398.70688,94.414627 395.521,61.36795 404.08566,50.317902 408.14496,45.080643 424.87354,48 431,48 c -2.45639,10.61779 -18.76114,46.903198 0,49 0,-13.379791 0.18045,-35.059048 7.30322,-46.851852 C 440.60028,46.345036 445.56976,46.851631 448,43 h -8 L 452,0 C 436.58118,5.7120361 442.5929,30.648689 432.29785,40.396603 427.93036,44.531975 411.96545,41 406,41 c 2.14297,-4.840492 3.35803,-9.975388 5,-15 1.29889,-3.974762 2.45422,-7.994888 3.65509,-12 6.95459,-23.195076 -20.43802,-10.1042709 -26.25232,2 -3.10281,6.45948 -2.56225,13.377953 5.59723,14 m -161,19 -5,-1 4,4 c -4.14632,9.353943 -5.47556,18.917007 -12.32562,26.995369 -2.09792,2.474098 -7.6651,8.53466 -10.63117,3.762352 -3.78,-6.081909 5.27782,-17.03624 2.73148,-24.742287 C 206.01416,40.58226 184.56931,61.56992 181,70 h -1 c 0.88411,-3.865807 3.21762,-8.85347 2.39583,-12.851852 -0.81996,-3.989525 -6.39466,-3.520585 -8.3719,-0.714508 -2.14786,3.048187 -1.79697,8.09024 -3.37656,11.56636 -3.92632,8.640488 -20.77141,27.13208 -31.25308,17.427467 -2.76586,-2.560798 -4.60256,-7.772224 -1.07563,-10.489967 7.78341,-5.997635 17.47677,-5.016495 24.26236,-13.941357 2.91927,-3.839615 5.66324,-12.256405 0.98534,-15.906639 C 158.1228,40.841812 149.78838,44.925533 145,48.22068 132.13277,57.075348 130.29645,80.001831 115.00386,84.932098 110.11543,86.50811 108.42567,82.024445 109.05941,78 c 0.68599,-4.356201 10.66591,-21.131042 3.83488,-23.109566 -3.24674,-0.940376 -4.94442,2.835884 -6.13735,5.114197 -3.72525,7.114677 -7.001149,15.23214 -12.850309,20.932098 C 86.961853,87.704353 84.045128,79.456406 85.109566,73 85.563889,70.244263 86.445137,67.607559 87.425156,65 89.055435,60.662273 91.186523,56.577698 92,52 79.914948,49.493935 74.641586,75.207367 78.148148,83.995369 81.274025,91.829323 90.18486,91.049629 95.330246,85.670525 97.503342,83.39872 98.887711,80.88974 100,78 h 1 c 0.16209,19.321144 18.08489,10.725204 27,2 3.73709,20.63055 28.27426,10.280258 38,1 -0.55917,5.014572 1.23985,6.74173 6,8 5.24783,-8.572861 10.35989,-18.107269 18.00386,-24.811729 2.97076,-2.605629 8.95773,-6.997334 11.96759,-2.025464 3.98946,6.590031 -4.03413,14.804829 -1.36728,21.817906 C 205.17607,96.003517 220.92448,85.202927 224,78 h 1 c 0.46407,21.785789 26.17795,14.627686 33,0 h 1 c 1.38174,15.706512 15.13046,12.503456 25,6 l 7,5 c 5.2478,-8.572853 10.35986,-18.107277 18.00385,-24.811729 2.97079,-2.605652 8.95776,-6.997315 11.96762,-2.025464 4.39041,7.252324 -5.78608,16.437237 -0.36808,23.689045 C 330.60788,99.242477 347.0607,76.170395 348,67 342.86795,70.351311 337.89902,86.360184 330.14813,84.399689 326.34802,83.438499 327.38483,78.626854 328.23303,76 331.74246,65.131226 332.00732,43.110466 314,54.147377 311.41245,55.733322 309.15411,57.85659 307.03937,60.01466 304.08023,63.034409 301.64413,66.116821 300,70 h -1 c 0.88409,-3.865799 3.21759,-8.853477 2.39581,-12.851852 -0.81997,-3.989525 -6.39465,-3.520581 -8.37188,-0.714508 -5.7399,8.14595 -3.86902,17.92044 -13.03858,25.172073 -3.06546,2.424278 -8.15738,4.800598 -11.24307,1.075615 C 261.41214,73.832565 278.76907,55.821701 279,46 258.47672,47.381092 263.76096,86.667603 240.28627,86.986115 227.09221,87.165131 234.84303,60.791126 238.9946,55.148148 242.72607,50.076176 256.09485,51.121883 262,51 v -3 l -21,1 c 4.55022,-7.795925 9.34958,-15.842155 13.21527,-24 0.99367,-2.09697 3.64438,-6.995941 1.00232,-8.913582 -3.01567,-2.188797 -7.10506,2.935524 -8.60802,4.918213 C 240.65622,28.8582 235.70175,39.549088 233,49 m 50.04398,-23.346451 c -7.25901,2.379914 -4.23652,11.328987 2.93673,8.599533 7.22028,-2.747345 4.69281,-11.100937 -2.93673,-8.599533 M 488,76 c 0.3761,17.654465 17.3078,16.788345 23,2 h 1 c 0.20599,24.57497 32.32806,5.517609 32,-11 -2.9082,2.665146 -4.80365,5.979828 -7.32562,9 -1.72333,2.063751 -3.62079,4.048347 -5.67517,5.786263 -17.1211,14.483604 -6.45752,-15.00837 -4.92279,-20.782406 0.61523,-2.31477 0.64386,-5.294907 -2.18213,-6.113423 -3.24677,-0.940391 -4.9444,2.835907 -6.13733,5.114197 -3.72522,7.114662 -7.00119,15.23217 -12.85031,20.932098 -6.94477,6.767617 -9.86151,-1.480316 -8.79709,-7.936729 0.45431,-2.755669 1.3356,-5.392525 2.31558,-8 1.63028,-4.337765 3.76135,-8.422283 4.57486,-13 -9.46606,-1.962975 -10.28104,8.29324 -13.24304,15 -2.76859,6.268814 -7.1962,10.904816 -13.75696,13 0,-10.872894 -2.98737,-19.503689 -5.09723,-30 -0.46777,-2.327175 0.76709,-8.46463 -1.5054,-9.824074 -2.89313,-1.730705 -4.72406,2.905628 -5.2739,4.828705 C 460.80542,56.609879 445.46259,65.081375 444.61343,76 443.21155,94.025719 463.41473,97.301208 473.86111,86.014664 477.82404,81.733017 483.61499,79.933449 488,76 M 160,48 c -0.28894,12.290253 -11.30763,19.29425 -22,23 1.87671,-10.521725 10.68687,-22.664104 22,-23 m 305,7 3,25 C 451.3508,76.995087 454.40848,63.753609 465,55 m -12,18 14,10 c -6.73557,11.53791 -22.30624,-1.769844 -14,-10 m -286,7 -1,1 1,-1 M 36,89 C 32.034344,90.44532 15.431286,92.703545 18.712191,83.314041 21.319654,75.851837 33.772903,86.266205 36,89 m 249,-6 -1,1 z"
      :stroke="logoColor" stroke-width="2"
    />
  </svg>
</template>

<style>
#signaturePath {
  stroke-dasharray: 2400;
  stroke-dashoffset: 2400;
  fill: transparent;
  animation: drawSignature 8s linear infinite;
}

@keyframes drawSignature {
  0% {
    stroke-dashoffset: 2400;
  }

  15% {
    fill: transparent;
  }

  35%,
  75% {
    stroke-dashoffset: 0;
    fill: v-bind(logoColor);
  }

  90%,
  100% {
    stroke-dashoffset: 2400;
    fill: transparent;
  }
}
</style>
